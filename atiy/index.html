<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>Are They Into You? üíÖ</title>
<meta name="description" content="Upload your texts and let Sebastian tell you the truth about whether they're into you.">
<meta name="robots" content="noindex, nofollow">

<!-- Google tag (gtag.js) - same as main site -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-THPQQG9ZB4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-THPQQG9ZB4');
</script>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
* { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }

:root {
  --pink: #FF2D87;
  --pink-dark: #D91A6E;
  --purple: #7B2D8E;
  --purple-deep: #4A1259;
  --gold: #FFD700;
  --cream: #FFF8F0;
  --text-dark: #2D1F2D;
  --radius: 20px;
}

html, body {
  min-height: 100%;
  min-height: 100dvh;
}

body {
  background: linear-gradient(135deg, var(--pink) 0%, var(--purple) 50%, var(--purple-deep) 100%);
  font-family: 'Outfit', sans-serif;
  min-height: 100vh;
  min-height: 100dvh;
  display: flex;
  flex-direction: column;
  overflow-x: hidden;
}

/* HEADER */
.header {
  padding: 1.5rem 1rem;
}

.header-content {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
}

.header-text {
  text-align: right;
}

.sebastian-header {
  width: auto;
  height: 70px;
  opacity: 0.85;
}

.logo {
  font-family: 'Playfair Display', serif;
  font-size: 2rem;
  font-weight: 700;
  color: white;
  text-shadow: 2px 4px 20px rgba(0,0,0,0.3);
  line-height: 1.1;
  margin-bottom: 4px;
}

.logo em {
  font-style: italic;
  color: var(--gold);
}

.tagline {
  font-size: 0.95rem;
  color: rgba(255,255,255,0.95);
  font-weight: 500;
  letter-spacing: 0.5px;
}

/* MAIN */
main {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 0 1rem 2rem;
  max-width: 480px;
  margin: 0 auto;
  width: 100%;
}

/* CARDS */
.card {
  background: white;
  border-radius: var(--radius);
  padding: 24px 20px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.15);
  margin-bottom: 16px;
  width: 100%;
  animation: slideUp 0.4s ease-out;
}

@keyframes slideUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.card-title {
  font-size: 1.2rem;
  font-weight: 700;
  color: var(--purple-deep);
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 8px;
}

/* UPLOAD AREA */
.upload-zone {
  border: 2px dashed rgba(123, 45, 142, 0.3);
  border-radius: 16px;
  padding: 32px 20px;
  text-align: center;
  cursor: pointer;
  transition: all 0.2s;
  background: linear-gradient(135deg, rgba(255,45,135,0.05) 0%, rgba(123,45,142,0.05) 100%);
}

.upload-zone:hover {
  border-color: var(--pink);
  background: linear-gradient(135deg, rgba(255,45,135,0.1) 0%, rgba(123,45,142,0.1) 100%);
}

.upload-zone.has-files {
  border-color: var(--pink);
  border-style: solid;
}

.upload-icon {
  font-size: 2.5rem;
  margin-bottom: 8px;
}

.upload-text {
  font-size: 1rem;
  font-weight: 600;
  color: var(--purple-deep);
}

.upload-hint {
  font-size: 0.85rem;
  color: #78716C;
  margin-top: 4px;
}

.file-preview {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 12px;
  justify-content: center;
}

.file-thumb {
  width: 60px;
  height: 60px;
  border-radius: 8px;
  object-fit: cover;
  border: 2px solid var(--pink);
}

/* TEXT INPUT */
.text-input {
  width: 100%;
  min-height: 120px;
  border: 2px solid #E7E5E4;
  border-radius: 12px;
  padding: 14px;
  font-family: 'Outfit', sans-serif;
  font-size: 1rem;
  resize: vertical;
  transition: border-color 0.2s;
}

.text-input:focus {
  outline: none;
  border-color: var(--pink);
}

.text-input::placeholder {
  color: #A8A29E;
}

/* BUTTONS */
.btn-primary {
  width: 100%;
  background: linear-gradient(135deg, var(--pink) 0%, var(--pink-dark) 100%);
  color: white;
  border: none;
  padding: 16px;
  font-family: 'Outfit', sans-serif;
  font-size: 1.1rem;
  font-weight: 700;
  border-radius: 14px;
  cursor: pointer;
  box-shadow: 0 4px 15px rgba(255,45,135,0.4);
  transition: transform 0.1s, box-shadow 0.1s;
}

.btn-primary:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 20px rgba(255,45,135,0.5);
}

.btn-primary:active {
  transform: translateY(1px);
}

.btn-primary:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

.btn-secondary {
  width: 100%;
  background: transparent;
  color: white;
  border: 2px solid rgba(255,255,255,0.4);
  padding: 14px;
  font-family: 'Outfit', sans-serif;
  font-size: 1rem;
  font-weight: 600;
  border-radius: 14px;
  cursor: pointer;
  transition: all 0.2s;
  margin-top: 12px;
}

.btn-secondary:hover {
  border-color: white;
  background: rgba(255,255,255,0.1);
}

/* LOADING */
.loading-container {
  text-align: center;
  padding: 3rem 1rem;
}

.loading-sebastian {
  width: auto;
  height: 180px;
  margin: 0 auto 20px;
  animation: bounce 1s ease-in-out infinite;
}

@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

.loading-text {
  font-size: 1.1rem;
  color: var(--purple-deep);
  font-weight: 500;
}

.loading-dots::after {
  content: '';
  animation: dots 1.5s steps(4, end) infinite;
}

@keyframes dots {
  0% { content: ''; }
  25% { content: '.'; }
  50% { content: '..'; }
  75% { content: '...'; }
}

/* QUESTIONS */
.question-card {
  background: white;
  border-radius: var(--radius);
  padding: 24px 20px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.15);
  width: 100%;
  animation: popIn 0.3s ease-out;
}

@keyframes popIn {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}

.question-progress {
  display: flex;
  gap: 6px;
  margin-bottom: 20px;
  justify-content: center;
}

.progress-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: #E7E5E4;
  transition: all 0.2s;
}

.progress-dot.active {
  background: var(--pink);
  transform: scale(1.2);
}

.progress-dot.done {
  background: var(--purple);
}

.question-text {
  font-size: 1.15rem;
  font-weight: 600;
  color: var(--purple-deep);
  margin-bottom: 20px;
  line-height: 1.5;
}

.option-btn {
  width: 100%;
  background: #F5F5F4;
  border: 2px solid transparent;
  border-radius: 12px;
  padding: 14px 16px;
  font-family: 'Outfit', sans-serif;
  font-size: 1rem;
  font-weight: 500;
  color: var(--text-dark);
  text-align: left;
  cursor: pointer;
  margin-bottom: 10px;
  transition: all 0.15s;
}

.option-btn:hover {
  background: rgba(255,45,135,0.08);
  border-color: var(--pink);
}

.option-btn:active {
  transform: scale(0.98);
}

/* VERDICT */
.verdict-header {
  text-align: center;
  margin-bottom: 20px;
}

.verdict-badge {
  display: inline-block;
  padding: 8px 24px;
  border-radius: 30px;
  font-size: 1.3rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: 12px;
}

.verdict-YES { background: linear-gradient(135deg, #10B981, #059669); color: white; }
.verdict-PROBABLY-YES { background: linear-gradient(135deg, #34D399, #10B981); color: white; }
.verdict-MIXED-SIGNALS { background: linear-gradient(135deg, #FBBF24, #F59E0B); color: #1c1917; }
.verdict-PROBABLY-NOT { background: linear-gradient(135deg, #FB923C, #EA580C); color: white; }
.verdict-NO { background: linear-gradient(135deg, #EF4444, #DC2626); color: white; }

/* HEAT GAUGE */
.heat-gauge {
  text-align: center;
  padding: 10px 0 20px;
}

.gauge-wrapper {
  position: relative;
  width: 220px;
  height: 130px;
  margin: 0 auto;
}

.gauge-arc {
  width: 220px;
  height: 110px;
  border-radius: 110px 110px 0 0;
  background: linear-gradient(to right, 
    #3B82F6 0%, 
    #8B5CF6 25%, 
    #EC4899 50%, 
    #F97316 75%, 
    #EF4444 100%
  );
  position: relative;
  overflow: hidden;
}

.gauge-arc::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 140px;
  height: 70px;
  background: white;
  border-radius: 70px 70px 0 0;
}

.gauge-needle {
  position: absolute;
  bottom: 0;
  left: 50%;
  width: 6px;
  height: 85px;
  background: linear-gradient(to top, #4A1259, #7B2D8E);
  transform-origin: bottom center;
  transform: translateX(-50%) rotate(-70deg);
  border-radius: 3px;
  transition: transform 1.2s cubic-bezier(0.68, -0.15, 0.27, 1.15);
  z-index: 10;
  box-shadow: 0 2px 8px rgba(0,0,0,0.3);
}

.gauge-needle::after {
  content: '';
  position: absolute;
  bottom: -10px;
  left: 50%;
  transform: translateX(-50%);
  width: 20px;
  height: 20px;
  background: linear-gradient(135deg, #7B2D8E, #4A1259);
  border-radius: 50%;
  box-shadow: 0 2px 6px rgba(0,0,0,0.3);
}

.gauge-emojis {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}

.gauge-emoji {
  position: absolute;
  font-size: 1.4rem;
  transform: translate(-50%, -50%);
}

.gauge-emoji.pos-1 { top: 80%; left: 5%; }
.gauge-emoji.pos-2 { top: 38%; left: 12%; }
.gauge-emoji.pos-3 { top: 5%; left: 32%; }
.gauge-emoji.pos-4 { top: 5%; left: 68%; }
.gauge-emoji.pos-5 { top: 38%; left: 88%; }
.gauge-emoji.pos-6 { top: 80%; left: 95%; }

.verdict-headline {
  font-family: 'Playfair Display', serif;
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--purple-deep);
  line-height: 1.3;
}

.verdict-section {
  margin-top: 20px;
}

.verdict-section-title {
  font-size: 0.9rem;
  font-weight: 700;
  color: var(--pink);
  text-transform: uppercase;
  letter-spacing: 0.08em;
  margin-bottom: 10px;
}

.verdict-section p {
  font-size: 1rem;
  color: var(--text-dark);
  line-height: 1.7;
}

.flags-list {
  list-style: none;
  padding: 0;
}

.flags-list li {
  font-size: 0.95rem;
  color: var(--text-dark);
  padding: 8px 0;
  padding-left: 24px;
  position: relative;
}

.flags-list li::before {
  position: absolute;
  left: 0;
}

.green-flags li::before { content: 'üü¢'; }
.red-flags li::before { content: 'üö©'; }

/* SITUATION BADGE */
.situation-badge {
  display: inline-block;
  background: linear-gradient(135deg, var(--purple), var(--purple-deep));
  color: white;
  padding: 6px 14px;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: 16px;
}

/* ANALYSIS PREVIEW */
.analysis-preview {
  background: linear-gradient(135deg, rgba(255,45,135,0.08), rgba(123,45,142,0.08));
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 16px;
}

.analysis-preview-title {
  font-size: 0.85rem;
  font-weight: 700;
  color: var(--purple);
  margin-bottom: 10px;
}

.observation {
  font-size: 0.9rem;
  color: var(--text-dark);
  padding: 6px 0;
  padding-left: 20px;
  position: relative;
}

.observation::before {
  content: 'üëÄ';
  position: absolute;
  left: 0;
  font-size: 0.8rem;
}

/* BACK LINK */
.back-link {
  display: block;
  text-align: center;
  color: rgba(255,255,255,0.7);
  font-size: 0.9rem;
  text-decoration: none;
  padding: 1rem;
  transition: color 0.2s;
}

.back-link:hover {
  color: white;
}

/* MOBILE TWEAKS */
@media (max-width: 400px) {
  .header {
    padding: 1.5rem 1rem 1rem;
  }
  
  .logo {
    font-size: 1.9rem;
  }
  
  .card {
    padding: 20px 16px;
  }
}
</style>
</head>
<body>

<header class="header">
  <div class="header-content">
    <div class="header-text">
      <h1 class="logo">Are <em>They</em> Into You?</h1>
      <p class="tagline">Let Sebastian read the situation üíÖ</p>
    </div>
    <img src="sebastian.png" alt="Sebastian" class="sebastian-header">
  </div>
</header>

<main>
  <div id="app">
    <!-- Upload Stage -->
    <div id="upload-stage">
      <div class="card">
        <h2 class="card-title">üì∏ Share the Evidence</h2>
        <div class="upload-zone" id="upload-zone">
          <div class="upload-icon">üì±</div>
          <div class="upload-text">Tap to upload screenshots</div>
          <div class="upload-hint">DMs, texts, dating apps ‚Äî whatever you've got</div>
          <div class="file-preview" id="file-preview"></div>
        </div>
        <input type="file" id="file-input" accept="image/*" multiple hidden>
      </div>

      <div class="card">
        <h2 class="card-title">üí¨ Or paste the conversation</h2>
        <textarea class="text-input" id="text-input" placeholder="Copy and paste texts here, or give Sebastian some context about the situation..."></textarea>
      </div>

      <button class="btn-primary" id="analyze-btn" disabled>Let Sebastian Analyze This üîÆ</button>
    </div>

    <!-- Loading Stage -->
    <div id="loading-stage" style="display: none;">
      <div class="card">
        <div class="loading-container">
          <img src="sebastian.png" alt="Sebastian thinking" class="loading-sebastian">
          <p class="loading-text">Sebastian is studying every detail<span class="loading-dots"></span></p>
        </div>
      </div>
    </div>

    <!-- Analysis Stage (shows observations + questions) -->
    <div id="analysis-stage" style="display: none;">
      <div class="card" id="analysis-card">
        <div id="situation-container"></div>
        <div class="analysis-preview" id="observations-container">
          <div class="analysis-preview-title">üëÄ What Sebastian Noticed</div>
          <div id="observations-list"></div>
        </div>
        <div id="initial-read"></div>
      </div>
      <button class="btn-primary" id="continue-btn">Continue to Questions ‚Üí</button>
    </div>

    <!-- Questions Stage -->
    <div id="questions-stage" style="display: none;"></div>

    <!-- Verdict Stage -->
    <div id="verdict-stage" style="display: none;">
      <div class="card" id="verdict-card"></div>
      <button class="btn-secondary" id="start-over-btn">Start Over</button>
    </div>
  </div>

  <a href="/" class="back-link">‚Üê Back to The DIY Decider</a>
</main>

<script>
// ============================================
// CONFIG - Same server, use relative URLs
// ============================================
const API_BASE_URL = ''; // Empty = same origin (your server handles both DIY + Sebastian)

// ============================================
// STATE
// ============================================
let uploadedFiles = [];
let analysisData = null;
let currentQuestion = 0;
let answers = [];

// ============================================
// DOM ELEMENTS
// ============================================
const uploadZone = document.getElementById('upload-zone');
const fileInput = document.getElementById('file-input');
const filePreview = document.getElementById('file-preview');
const textInput = document.getElementById('text-input');
const analyzeBtn = document.getElementById('analyze-btn');

const uploadStage = document.getElementById('upload-stage');
const loadingStage = document.getElementById('loading-stage');
const analysisStage = document.getElementById('analysis-stage');
const questionsStage = document.getElementById('questions-stage');
const verdictStage = document.getElementById('verdict-stage');

const startOverBtn = document.getElementById('start-over-btn');

// ============================================
// FILE UPLOAD
// ============================================
uploadZone.addEventListener('click', () => fileInput.click());

fileInput.addEventListener('change', (e) => {
  const files = Array.from(e.target.files);
  uploadedFiles = [...uploadedFiles, ...files];
  renderFilePreviews();
  checkCanAnalyze();
});

function renderFilePreviews() {
  filePreview.innerHTML = '';
  uploadedFiles.forEach((file, i) => {
    const img = document.createElement('img');
    img.className = 'file-thumb';
    img.src = URL.createObjectURL(file);
    img.alt = `Screenshot ${i + 1}`;
    filePreview.appendChild(img);
  });
  
  if (uploadedFiles.length > 0) {
    uploadZone.classList.add('has-files');
  } else {
    uploadZone.classList.remove('has-files');
  }
}

textInput.addEventListener('input', checkCanAnalyze);

function checkCanAnalyze() {
  const hasContent = uploadedFiles.length > 0 || textInput.value.trim().length > 10;
  analyzeBtn.disabled = !hasContent;
}

// ============================================
// ANALYZE
// ============================================
analyzeBtn.addEventListener('click', async () => {
  showStage('loading');
  
  try {
    const formData = new FormData();
    uploadedFiles.forEach(file => formData.append('files', file));
    formData.append('text', textInput.value);
    
    const response = await fetch(`${API_BASE_URL}/sebastian/analyze`, {
      method: 'POST',
      body: formData
    });
    
    if (!response.ok) throw new Error('Analysis failed');
    
    const result = await response.json();
    analysisData = result.data;
    
    renderAnalysis();
    showStage('analysis');
    
  } catch (error) {
    console.error('Error:', error);
    alert('Oops! Something went wrong. Please try again.');
    showStage('upload');
  }
});

// Continue button - user controls when to proceed
document.getElementById('continue-btn').addEventListener('click', () => {
  showStage('questions');
  renderQuestion();
});

// ============================================
// RENDER ANALYSIS
// ============================================
function renderAnalysis() {
  // Situation badge
  const situationContainer = document.getElementById('situation-container');
  if (analysisData.situation_type) {
    situationContainer.innerHTML = `<span class="situation-badge">${analysisData.situation_type}</span>`;
  }
  
  // Observations
  const observationsList = document.getElementById('observations-list');
  if (analysisData.observations && analysisData.observations.length > 0) {
    observationsList.innerHTML = analysisData.observations
      .map(obs => `<div class="observation">${obs}</div>`)
      .join('');
  }
  
  // Initial read
  const initialRead = document.getElementById('initial-read');
  if (analysisData.initial_read) {
    initialRead.innerHTML = `
      <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid #E7E5E4;">
        <div style="font-size: 0.85rem; font-weight: 700; color: var(--purple); margin-bottom: 10px;">üí¨ Sebastian's First Take</div>
        <p style="font-size: 1.05rem; color: var(--text-dark); line-height: 1.6; font-style: italic;">"${analysisData.initial_read}"</p>
      </div>
    `;
  }
}

// ============================================
// QUESTIONS
// ============================================
function renderQuestion() {
  const questions = analysisData.questions;
  if (currentQuestion >= questions.length) {
    getVerdict();
    return;
  }
  
  const q = questions[currentQuestion];
  
  questionsStage.innerHTML = `
    <div class="question-card">
      <div class="question-progress">
        ${questions.map((_, i) => `
          <div class="progress-dot ${i < currentQuestion ? 'done' : ''} ${i === currentQuestion ? 'active' : ''}"></div>
        `).join('')}
      </div>
      <p class="question-text">${q.question}</p>
      ${q.options.map((opt, i) => `
        <button class="option-btn" data-index="${i}">${opt}</button>
      `).join('')}
    </div>
  `;
  
  // Add click handlers
  questionsStage.querySelectorAll('.option-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const idx = parseInt(btn.dataset.index);
      answers.push({
        question: q.question,
        answer: q.options[idx]
      });
      currentQuestion++;
      renderQuestion();
    });
  });
}

// ============================================
// VERDICT
// ============================================
async function getVerdict() {
  showStage('loading');
  
  try {
    const response = await fetch(`${API_BASE_URL}/sebastian/verdict`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        originalContent: textInput.value,
        initialRead: analysisData.initial_read,
        situationType: analysisData.situation_type,
        observations: analysisData.observations,
        questions: analysisData.questions,
        answers: answers
      })
    });
    
    if (!response.ok) throw new Error('Verdict failed');
    
    const result = await response.json();
    renderVerdict(result.data);
    showStage('verdict');
    
  } catch (error) {
    console.error('Error:', error);
    alert('Oops! Sebastian got distracted. Please try again.');
    showStage('upload');
  }
}

function renderVerdict(verdict) {
  const verdictClass = verdict.verdict.replace(/\s+/g, '-');
  
  // Map verdict to needle rotation (-70 = cold, 70 = hot)
  const needleRotation = {
    'NO': -70,
    'PROBABLY NOT': -35,
    'MIXED SIGNALS': 0,
    'PROBABLY YES': 35,
    'YES': 70
  };
  const rotation = needleRotation[verdict.verdict] || 0;
  
  document.getElementById('verdict-card').innerHTML = `
    <div class="verdict-header">
      <div class="heat-gauge">
        <div class="gauge-wrapper">
          <div class="gauge-arc"></div>
          <div class="gauge-needle" id="verdict-needle"></div>
          <div class="gauge-emojis">
            <span class="gauge-emoji pos-1">ü•∂</span>
            <span class="gauge-emoji pos-2">üò¨</span>
            <span class="gauge-emoji pos-3">ü§î</span>
            <span class="gauge-emoji pos-4">üíï</span>
            <span class="gauge-emoji pos-5">üòç</span>
            <span class="gauge-emoji pos-6">üî•</span>
          </div>
        </div>
      </div>
      <h2 class="verdict-headline">${verdict.headline}</h2>
    </div>
    
    <div class="verdict-section">
      <div class="verdict-section-title">‚òï The Tea</div>
      <p>${verdict.the_tea}</p>
    </div>
    
    ${verdict.green_flags && verdict.green_flags.length > 0 ? `
      <div class="verdict-section">
        <div class="verdict-section-title">Green Flags</div>
        <ul class="flags-list green-flags">
          ${verdict.green_flags.map(f => `<li>${f}</li>`).join('')}
        </ul>
      </div>
    ` : ''}
    
    ${verdict.red_flags && verdict.red_flags.length > 0 ? `
      <div class="verdict-section">
        <div class="verdict-section-title">Red Flags</div>
        <ul class="flags-list red-flags">
          ${verdict.red_flags.map(f => `<li>${f}</li>`).join('')}
        </ul>
      </div>
    ` : ''}
    
    <div class="verdict-section">
      <div class="verdict-section-title">üíÖ Sebastian's Advice</div>
      <p>${verdict.sebastian_advice}</p>
    </div>
  `;
  
  // Animate the needle after a short delay for dramatic effect
  setTimeout(() => {
    const needle = document.getElementById('verdict-needle');
    if (needle) {
      needle.style.transform = `translateX(-50%) rotate(${rotation}deg)`;
    }
  }, 300);
}

// ============================================
// NAVIGATION
// ============================================
function showStage(stage) {
  uploadStage.style.display = stage === 'upload' ? 'block' : 'none';
  loadingStage.style.display = stage === 'loading' ? 'block' : 'none';
  analysisStage.style.display = stage === 'analysis' ? 'block' : 'none';
  questionsStage.style.display = stage === 'questions' ? 'block' : 'none';
  verdictStage.style.display = stage === 'verdict' ? 'block' : 'none';
}

startOverBtn.addEventListener('click', () => {
  // Reset everything
  uploadedFiles = [];
  analysisData = null;
  currentQuestion = 0;
  answers = [];
  
  filePreview.innerHTML = '';
  uploadZone.classList.remove('has-files');
  textInput.value = '';
  analyzeBtn.disabled = true;
  
  showStage('upload');
});
</script>

</body>
</html>
